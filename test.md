# Финальный проект 7 спринта

В проекте необходимо протестировать API учебного сервиса [Яндекс.Самокат](https://qa-scooter.praktikum-services.ru/). Документация доступна по ссылке: http://qa-scooter.praktikum-services.ru/docs/.

Перед началом написания тестов рекомендуется протестировать API вручную с помощью Postman. Это поможет понять, как работают запросы. Для вспоминания материала спринта можно обратиться к шпаргалкам.

## Подготовка
Прежде чем приступить к заданиям:
- Создайте Maven-проект.
- Назовите проект Sprint7.
- Подключите зависимости JUnit 4, RestAssured, Allure.

## Тестирование API
Убедитесь, что все ручки работают корректно и возвращают необходимые ошибки.

### Создание курьера
Проверьте:
- Возможность создать курьера.
- Невозможность создать двух одинаковых курьеров.
- Необходимость передать все обязательные поля для создания курьера.
- Правильный код ответа на запрос.
- Успешный запрос возвращает `ok: true`.
- Ошибка возвращается, если какое-то поле отсутствует.
- Ошибка возвращается, если пытаетесь создать пользователя с существующим логином.

### Логин курьера
Проверьте:
- Возможность курьеру авторизоваться.
- Необходимость передать все обязательные поля для аутентификации.
- Система вернет ошибку, если логин или пароль указаны неверно.
- Ошибка возвращается, если какое-то поле отсутствует.
- Ошибка возвращается, если пытаетесь авторизоваться под несуществующим пользователем.
- Успешный запрос возвращает ID курьера.

### Создание заказа
Проверьте, что при создании заказа:
- Можно указать один из цветов – BLACK или GREY.
- Можно указать оба цвета.
- Можно вообще не указывать цвет.
- Тело ответа содержит track.

Для тестирования создания заказа рекомендуется использовать параметризацию.

### Список заказов
Убедитесь, что тело ответа содержит список заказов.

## Отчёт Allure
Сгенерируйте отчет и загрузите его в репозиторий.

Обратите внимание: необходимо избегать коммита всей папки `target`. Чтобы добавить в коммит только отчет, выполните команды в папке проекта через консоль:

```bash
git add -f ./target/allure-results/.
git commit -m "Добавить отчет Allure"
git push
```

Не забывайте, что тесты должны быть независимыми. Все данные должны быть удалены после выполнения теста. Если для проверки требуется пользователь, создайте его перед тестом и удалите после.

### Дополнительное задание
Вы можете выполнить это задание по желанию. Оно не повлияет на оценку за основную часть, но позволит дополнительно попрактиковаться.

### Протестировать ручки:
#### Удалить курьера
Проверьте:
- Неуспешный запрос возвращает соответствующую ошибку.
- Успешный запрос возвращает `ok: true`.
- Если отправить запрос без ID, будет возвращена ошибка.
- Если отправить запрос с несуществующим ID, будет возвращена ошибка.

#### Принять заказ
Проверьте:
- Успешный запрос возвращает `ok: true`.
- Если не передать ID курьера, запрос вернет ошибку.
- Если передать неверный ID курьера, запрос вернет ошибку.
- Если не передать номер заказа, запрос вернет ошибку.
- Если передать неверный номер заказа, запрос вернет ошибку.

#### Получить заказ по номеру
Проверьте:
- Успешный запрос возвращает объект с заказом.
- Запрос без номера заказа возвращает ошибку.
- Запрос с несуществующим заказом возвращает ошибку.

В запросах 2 и 3 дополнительного задания необходимо передавать query-параметры.

Query-параметры – это параметры в форме "имяпараметра=значение". Строка запроса с параметрами выглядит как: someurl?parameter1=1&parameter2=somevalue. Параметры разделяются знаком &.

Посмотрите, как передать такой запрос в RestAssured:

given()
// здесь всё как обычно
.auth().oauth2("ваш_токен")
// Передача параметров в запрос
.queryParam("parameter1", "1")
.queryParam("parameter2", "some_value")
.get("some_url")
.then()
... // дальше всё как обычно


Обратите внимание на метод queryParam: в него передают имя параметра и его значение.

Как видишь, эту строчку можно повторять несколько раз — столько, сколько нужно передать параметров.

#### Как будут оценивать твою работу
##### Для основного задания
Нейминг элементов корректный. Если не помнишь правила, посмотри в шпаргалку.
В pom.xml нет ничего лишнего.
Тесты лежат в src/test/java.
Для каждой ручки тесты лежат в отдельном классе.
Написаны тесты на ручку «Создать курьера».
Написаны тесты на ручку «Логин курьера».
Написаны тесты на ручку «Создать заказ».
Написаны тесты на ручку, которая получает список заказов.
Для всех шагов автотестов должна быть использована аннотация @Step.
Сделан отчёт с помощью Allure. Не забудь закоммитить его.
В тестах проверяется тело и код ответа.
Все тесты независимы.
Необходимые тестовые данные создаются перед тестом и удаляются после того, как он выполнится.
В тестах нет хардкода.
В проекте используется Java 11.
Для дополнительного задания
Правила те же, что и для основного задания. Что ещё:
Написаны тесты на ручку «Удалить курьера».
Написаны тесты на ручку «Принять заказ».
Написаны тесты на ручку «Получить заказ по его номеру».
Как сдать работу
Прочитай инструкцию. 